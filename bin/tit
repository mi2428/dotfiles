#!/bin/bash
case "$1" in
    "auth")
        curl -F "username=$2" -F "password=$3" -F "buttonClicked=4" -s https://wlanauth.noc.titech.ac.jp/login.html -o /dev/null -w "%{http_code}\n"
    "up")
        echo -n "setting proxy..."
        export http_proxy="131.112.125.238:3128"
        export HTTP_PROXY=$http_proxy
        export https_proxy=$http_proxy
        export ftp_proxy=$http_proxy
        export rsync_proxy=$http_proxy
        export no_proxy="localhost,127.0.0.1"
        git config --global http.proxy $http_proxy
        git config --global https.proxy $http_proxy
        echo "done"
        ;;
    "down")
        echo -n "unsetting proxy..."
        export http_proxy=""
        export HTTP_PROXY=$http_proxy
        export https_proxy=$http_proxy
        export ftp_proxy=$http_proxy
        export rsync_proxy=$http_proxy
        export no_proxy=$http_proxy
        git config --global http.proxy ""
        git config --global https.proxy ""
        echo "done"
        ;;
esac
